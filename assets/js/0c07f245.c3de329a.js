"use strict";(self.webpackChunkdocumentacio=self.webpackChunkdocumentacio||[]).push([[9590],{8468:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"Desplegament","title":"Desplegament","description":"Quan treballem en els .md estem en el \\"codi font\\" de la documentaci\xf3. Per desplegar i poder consultar-la com una web, cal generar els fitxers est\xe0tics:","source":"@site/docs/Desplegament.md","sourceDirName":".","slug":"/Desplegament","permalink":"/projecte1DAW/docs/Desplegament","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Desplegament.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_label":"Desplegament","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/projecte1DAW/docs/tutorial-extras/translate-your-site"}}');var a=s(4848),r=s(8453);const i={sidebar_label:"Desplegament",sidebar_position:4},o="Desplegament",c={},l=[{value:"Desplegar a Github",id:"desplegar-a-github",level:2},{value:"Desplegar PHP",id:"desplegar-php",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"desplegament",children:"Desplegament"})}),"\n",(0,a.jsx)(n.p,{children:'Quan treballem en els .md estem en el "codi font" de la documentaci\xf3. Per desplegar i poder consultar-la com una web, cal generar els fitxers est\xe0tics:'}),"\n",(0,a.jsx)(n.p,{children:"npm run build"}),"\n",(0,a.jsxs)(n.p,{children:["Aix\xf2 genera el directori ",(0,a.jsx)(n.code,{children:"build"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"desplegar-a-github",children:"Desplegar a Github"}),"\n",(0,a.jsx)(n.p,{children:"Tenim moltes opcions per desplegar. Una de les m\xe9s simples \xe9s a github pages des d'una branca."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Creem la branca gh-pages"}),"\n",(0,a.jsx)(n.li,{children:"Anem a settings > pages > deploy from a branch > gh-pages / root"}),"\n",(0,a.jsxs)(n.li,{children:["Ara cal automatitzar el desplegament a aquesta branca amb un ",(0,a.jsx)(n.code,{children:"action"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"Creem el action amb aquest codi:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yml",children:'name: Your github action\n\non:\n  push:\n    branches:\n      # NOTE: You may want to limit the trigger branch to be "main" or "master" etc.\n      - \'*\'\n\njobs:\n  publish:\n    permissions:\n      contents: write\n    runs-on: ubuntu-latest\n    steps:\n      - name: Check out\n        # You may use a newer version of https://github.com/actions/checkout\n        uses: actions/checkout@v4\n\n      - name: Generate your content\n        run: echo "Optional placeholder. Put your project\'s static website generator command here."\n\n      - name: Install dependencies\n        working-directory: documentacio\n        run: npm ci\n        \n      - name: nmp build\n        working-directory: documentacio\n        run: npm run build\n\n      - name: Publish current workdir (which contains generated content) to GitHub Pages\n        uses: rayluo/github-pages-overwriter@v1.3\n\n        with:\n\n          # Optional.\n          #\n          # Default value "." means the root directory of your project will be published.\n          #\n          # You can use whatever directory your project uses,\n          # for example "wwwroot" (without leading "./").\n          # Such a directory does *not* have to already exist in your repo,\n          # it could be an output directory created dynamically\n          # by your static website builder.\n          source-directory: documentacio/build\n\n          # Optional. Default value "gh-pages".\n          # It specifies the temporary branch which hosts the static website.\n          # Each build will OVERWRITE this branch.\n          target-branch: gh-pages\n\n'})}),"\n",(0,a.jsx)(n.p,{children:"Cal modificar les rutes si \xe9s necessari."}),"\n",(0,a.jsxs)(n.p,{children:["D'aquesta manera, utilitzem un action preconfigurat ",(0,a.jsx)(n.code,{children:"rayluo/github-pages-overwriter@v1.3"})," que sobreescriu tota la branca ",(0,a.jsx)(n.code,{children:"gh-pages"})," cada vegada."]}),"\n",(0,a.jsxs)(n.p,{children:["Tamb\xe9 tenim un script que instal\xb7la les depend\xe8ncies i f\xe0 el ",(0,a.jsx)(n.code,{children:"build"})," de docusaurus."]}),"\n",(0,a.jsxs)(n.p,{children:["Alternativa: ",(0,a.jsx)(n.a,{href:"https://github.com/peaceiris/actions-gh-pages",children:"https://github.com/peaceiris/actions-gh-pages"})]}),"\n",(0,a.jsx)(n.h2,{id:"desplegar-php",children:"Desplegar PHP"}),"\n",(0,a.jsx)(n.p,{children:"Es pot fer un action com aquest:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"name: Deploy \n\non:\n  push:\n    branches:\n      - 'master'\n\njobs:\n  publish:\n    permissions:\n      contents: write\n    runs-on: ubuntu-latest\n    steps:\n      - name: Check out\n        uses: actions/checkout@v4\n\n      - name: \ud83d\udcc2 Sync files\n        uses: SamKirkland/FTP-Deploy-Action@v4.3.5\n        with:\n          server: ${{ secrets.SFTP_HOST }}\n          username: ${{ secrets.SFTP_USER }}\n          password: ${{ secrets.SFTP_PASS }}\n          local-dir: ./build/\n          server-dir: /public_html/materiales/\n"})}),"\n",(0,a.jsx)(n.p,{children:"Cal canviar les rutes i crear els secrets."})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var t=s(6540);const a={},r=t.createContext(a);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);